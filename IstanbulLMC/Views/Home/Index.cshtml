@model Transfer

@{
    ViewData["Title"] = "Home Page";
}

<style>
    .search-results-container {
        position: absolute; /* Adjust based on your layout */
        background-color: white;
        border: 1px solid #ddd;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        width: 500px; /* Adjust as needed */
        height: 300px; /* Adjust as needed */
        overflow-y: auto; /* Makes it scrollable */
        z-index: 1000; /* To ensure it's above other content */
    }

</style>

<section class="banner-one" style="background-image: url(assets/images/backgrounds/banner-1-1-bg.jpg);">
    <div class="container">
        <h2>Find your <span>next tour</span></h2>
        <p>Where would you like to go?</p>
        <form class="tour-search-one" action="tour-sidebar.html">
            <div class="tour-search-one__inner">
                <div class="tour-search-one__inputs">
                    <div class="tour-search-one__col">
                        <div class="tour-search-one__input-box">
                            <label for="place">From</label>
                            <input asp-for="FromPlaceID" type="text" placeholder="Enter keywords">
                            @* Container for Results *@
                            <div id="searchResults" class="search-results-container" style="display:none;">
                                @* Results will be loaded here dynamically *@
                            </div>

                        </div><!-- /.tour-search-one__input-box -->
                    </div><!-- /.tour-search-one__col -->

                    <div class="tour-search-one__col">
                        <div class="tour-search-one__input-box">
                            <label for="place">To</label>
                            <input asp-for="ToPlaceID" type="text" placeholder="Enter keywords">
                            @* Container for Results *@
                            <div id="searchResults" class="search-results-container" style="display:none;">
                                @* Results will be loaded here dynamically *@
                            </div>

                        </div><!-- /.tour-search-one__input-box -->
                    </div><!-- /.tour-search-one__col -->
                    
                    @* <div class="tour-search-one__input-box">
                        <label for="when">When</label>
                        <input type="text" placeholder="September" name="when" id="when">
                    </div><!-- /.tour-search-one__input-box --> *@
                    
                    <div class="tour-search-one__input-box">
                        <label for="when">When</label>
                        <input type="datetime-local" placeholder="September" name="when" id="when">
                    </div><!-- /.tour-search-one__input-box -->

                </div><!-- /.tour-search-one__inputs -->
                <div class="tour-search-one__btn-wrap">
                    <button type="submit" class="thm-btn tour-search-one__btn">Find now</button>
                </div><!-- /.tour-search-one__btn-wrap -->
            </div><!-- /.tour-search-one__inner -->
        </form><!-- /.tour-search-one -->
    </div><!-- /.container -->
</section><!-- /.banner-one -->


<section class="features-one__title">
    <div class="container">
        <div class="block-title text-center">
            <p>Call our agents to book!</p>
            <h3>Tripo Award Winning and Top <br> Rated Tour Operator</h3>
        </div><!-- /.block-title -->
    </div><!-- /.container -->
</section><!-- /.features-one__title -->

<script>
    // Event delegation to handle clicks on search results
    $("#searchResults").on("click", ".search-result-item", function () {
        var selectedName = $(this).data("name");
        $("#FromPlaceID").val(selectedName);
        $("#searchResults").hide(); // Optionally hide the results after selection
    });

    $("#FromPlaceID").on("input", function () {
        var searchText = $(this).val();

        if (searchText.length > 3) {
            $.ajax({
                url: '@Url.Action("GetPlaceByName", "Home")',
                data: { name: searchText },
                type: 'GET',
                success: function (data) {
                    $("#searchResults").html(data).show();
                },
                error: function () {
                    // Handle errors here
                    $("#searchResults").html("<p>Error loading results.</p>").show();
                }
            });
        } else {
            $("#searchResults").hide();
        }
    });
</script>

